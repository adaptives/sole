#{extends 'main.html' /}

<div class="feedbacks">
  
#{list items:feedbacks, as:'feedback'}
	<div class="feedback">
		<div class="feedback-message">
			${feedback.message.nl2br()}
		</div>
		<div class="feedback-name">
			By ${feedback.name}
		</div>
	</div>
#{/list}

</div>

<div class="feedback-form">
	#{form @FeedbackC.createFeedback()}
		<p>
			<div><label>Name <span class="required-field">(required)</span> </label></div>
			<input type="text" name="name" value="" id="name" /> <span class="error">#{error 'name' /}</span>
		</p>
		<p>
			<div><label>Email <span class="required-field">(required, but will not be displayed)</span></label></div>
			<input type="text" name="email" value="" id="email" /> <span class="error">#{error 'email' /}</span>
		</p>
		<p>
			<div><label>Message <span class="required-field">(required)</span></label></div>
			<textarea id="feedback_text" class="simple" name="message" rows="8" cols="40" id="message"></textarea>
		</p>
		<p>
			<input type="submit" value="Submit" id="postFeedback" />
			<input type="reset" value="Clear" />
		</p>
	#{/form}
	<SCRIPT>
		var init_obj = {element_id:'feedback_text', window: window};
		$.extend(true, init_obj, config_tinymce_sim);
		tinyMCE.execCommand('mceAddFrameControl',false, init_obj);
	</SCRIPT>
</div>

